<div class="contenedor-login">

  <nav class="navbar navbar-expand-lg navbar-dark bg-dark">
    <div class="container-fluid">
      <div class="collapse navbar-collapse" id="navbarNavDarkDropdown">
        <div class="mx-auto">
          <a class="navbar-brand">INGRESO DE NUEVOS ARTÍCULOS</a>
        </div>
        <button type="button" class="btn btn-danger" (click)="onLogout()">Cerrar sesion</button>
      </div>
    </div>
  </nav>

  <div>
    <a href="/home"><mat-icon class="icono-blanco large">home</mat-icon></a>
  </div>

  <div class="contenedor">
    <div class="grid-container">

      <input class="input-1" type="text" placeholder="ID automático" [value]="formData.codigo" disabled>

      <select
        class="input-2"
        [(ngModel)]="formData.proveedor"
        name="proveedor"
        aria-label="Seleccionar proveedor"
        title="Seleccionar proveedor"
        required>
        <option value="">Seleccione proveedor</option>
        <option *ngFor="let p of proveedores" [value]="p.codigo">{{ p.codigo }}</option>
      </select>

      <input type="text" class="input-2" placeholder="Nombre del Artículo" [(ngModel)]="formData.nombre" required>

      <div class="grid">
        <button class="btn btn-success"
                [disabled]="!formData.proveedor || !formData.nombre"
                (click)="guardarArticulo()">
          {{ editandoId ? 'Actualizar' : 'Guardar' }}
        </button>

        <button class="btn btn-primary" (click)="limpiarCampos()">Limpiar Campos</button>
        <button class="btn btn-warning" (click)="exportarPDF()">Descargar en PDF</button>
      </div>
    </div>
  </div>

  <div *ngIf="mensaje" class="alert alert-info text-center mt-3">
    {{ mensaje }}
  </div>

  <div class="tabla mt-4">
    <div class="encabezado">ID</div>
    <div class="encabezado">Proveedor</div>
    <div class="encabezado">Nombre</div>
    <div class="encabezado">Acciones</div>

    <ng-container *ngFor="let art of articulos">
      <div>{{ art.codigo }}</div>
      <div>{{ art.proveedor }}</div>
      <div>{{ art.nombre }}</div>
      <div>
        <button class="btn btn-success btn-sm me-2" (click)="editarArticulo(art)">Modificar</button>
        <button class="btn btn-danger btn-sm" (click)="eliminarArticulo(art._id)">Eliminar</button>
      </div>
    </ng-container>
  </div>

  <div class="text-center mt-3">
    <button class="btn btn-success" (click)="cambiarPagina(-1)" [disabled]="page === 1">Anterior</button>
    <span class="pagina-label">Página {{ page }} de {{ totalPages }}</span>
    <button class="btn btn-success" (click)="cambiarPagina(1)" [disabled]="page === totalPages">Siguiente</button>
  </div>

</div>
